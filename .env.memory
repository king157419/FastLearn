# DeepTutor Memory System - 环境配置

# ============================================
# PostgreSQL + pgvector 配置
# ============================================
DATABASE_URL=postgresql://deeptutor:deeptutor_password@localhost:5433/deeptutor_memory
POSTGRES_HOST=localhost
POSTGRES_PORT=5433
POSTGRES_USER=deeptutor
POSTGRES_PASSWORD=deeptutor_password
POSTGRES_DB=deeptutor_memory

# 连接池配置
DB_POOL_SIZE=20
DB_MAX_OVERFLOW=10
DB_POOL_TIMEOUT=30
DB_POOL_RECYCLE=3600

# ============================================
# Embedding 模型配置
# ============================================

# ⚠️ API Keys 已配置
# 选项 1: OpenAI（推荐，质量最好）
# EMBEDDING_PROVIDER=openai
# EMBEDDING_MODEL=text-embedding-3-small
# EMBEDDING_DIMENSIONS=1536
# OPENAI_API_KEY=sk-your-openai-key-here
# OPENAI_EMBEDDING_BASE_URL=https://api.openai.com/v1

# 选项 2: DeepSeek（便宜 20 倍）⭐ 省钱首选 [已启用]
EMBEDDING_PROVIDER=deepseek
EMBEDDING_MODEL=deepseek-embeddings
EMBEDDING_DIMENSIONS=1024
DEEPSEEK_API_KEY=sk-35cff3fa0c61490393b162508586fb0b
DEEPSEEK_BASE_URL=https://api.deepseek.com/v1

# ============================================
# LLM 配置（用于 Agent）
# ============================================

# ⚠️ LLM API Key 已配置
# DeepSeek 推荐（便宜 200 倍） [已启用]
LLM_PROVIDER=deepseek
LLM_MODEL=deepseek-chat
DEEPSEEK_API_KEY=sk-35cff3fa0c61490393b162508586fb0b
DEEPSEEK_BASE_URL=https://api.deepseek.com/v1

# 或者使用 OpenAI
# LLM_PROVIDER=openai
# LLM_MODEL=gpt-4o-mini
# OPENAI_API_KEY=sk-your-openai-key-here

# ============================================
# 向量数据库配置
# ============================================
VECTOR_INDEX_TYPE=ivfflat
IVFFLAT_LISTS=100

# ============================================
# 摘要 Agent 配置
# ============================================
SUMMARY_TRIGGER_ROUNDS=3
SUMMARY_TRIGGER_TOKENS=1000
SUMMARY_KEEP_RECENT=5

# ============================================
# 检索配置
# ============================================
MEMORY_RETRIEVAL_TOP_K=10
SEMANTIC_RETRIEVAL_TOP_K=10
HYBRID_RETRIEVAL_TOP_K=7
MEMORY_TIME_FILTER_DAYS=7

RERANK_KEYWORD_WEIGHT=0.4
RERANK_SEMANTIC_WEIGHT=0.4
RERANK_PROFILE_WEIGHT=0.2

# ============================================
# 其他配置
# ============================================
ENVIRONMENT=development
LOG_LEVEL=INFO
LOG_FILE=logs/memory_system.log

API_HOST=0.0.0.0
API_PORT=8001
API_WORKERS=4

CORS_ORIGINS=http://localhost:3000,http://localhost:8000
